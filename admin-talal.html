<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TALAL.TEK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #3498db; --dark: #1e293b; --bg: #f1f5f9; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; }
        
        /* Sidebar */
        .sidebar { width: 250px; background: var(--dark); color: white; height: 100vh; padding: 20px; position: fixed; }
        .sidebar h2 { font-size: 1.2rem; margin-bottom: 30px; color: var(--primary); }
        .nav-item { padding: 15px; cursor: pointer; border-radius: 8px; margin-bottom: 10px; transition: 0.3s; display: flex; align-items: center; gap: 10px; }
        .nav-item:hover, .nav-item.active { background: var(--primary); }

        /* Main Content */
        .main-content { margin-left: 280px; padding: 40px; width: calc(100% - 280px); }
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 30px; }
        
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--dark); }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; box-sizing: border-box; }
        
        .btn-save { background: var(--primary); color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
        
        .table-area { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .table-area th, .table-area td { padding: 12px; border: 1px solid #e2e8f0; text-align: left; }
        .table-area th { background: #f8fafc; }
        .btn-delete { color: #e74c3c; cursor: pointer; border: none; background: none; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2><i class="fas fa-user-shield"></i> TALAL Admin</h2>
    <div class="nav-item active" onclick="showSection('questionsSec')"><i class="fas fa-pen"></i> Add Questions</div>
    <div class="nav-item" onclick="showSection('videosSec')"><i class="fas fa-video"></i> Manage Lessons</div>
</div>

<div class="main-content">
    <div id="questionsSec" class="card">
        <h3>Add New Question</h3>
        <div class="form-group">
            <label>Select Unit</label>
            <select id="qUnit">
                <option value="Unit 1">Unit 1: Linear Equations</option>
                <option value="Unit 2">Unit 2: Functions</option>
                <option value="Unit 3">Unit 3: Geometry</option>
                <option value="Unit 4">Unit 4: Data Analysis</option>
            </select>
        </div>
        <div class="form-group">
            <label>Question Text (Supports LaTeX)</label>
            <textarea id="qText" rows="3" placeholder="e.g. Solve: $x + 5 = 10$"></textarea>
        </div>
        <div class="form-group">
            <label>Options (A, B, C, D)</label>
            <input type="text" id="optA" placeholder="Option A" style="margin-bottom: 5px;">
            <input type="text" id="optB" placeholder="Option B" style="margin-bottom: 5px;">
            <input type="text" id="optC" placeholder="Option C" style="margin-bottom: 5px;">
            <input type="text" id="optD" placeholder="Option D">
        </div>
        <button class="btn-save" onclick="saveQuestion()">Save Question</button>
    </div>

    <div id="videosSec" class="card" style="display:none;">
        <h3>Manage Video Lessons</h3>
        <div class="form-group">
            <label>Unit Number</label>
            <input type="text" id="vUnit" placeholder="e.g. Unit 1">
        </div>
        <div class="form-group">
            <label>Lesson Title</label>
            <input type="text" id="vTitle" placeholder="e.g. Introduction to Slopes">
        </div>
        <div class="form-group">
            <label>YouTube Embed Link</label>
            <input type="text" id="vUrl" placeholder="https://www.youtube.com/embed/XXXXXX">
        </div>
        <button class="btn-save" onclick="saveVideo()" style="background: #2ecc71;">Add Lesson</button>
    </div>

    <div class="card">
        <h3>Current Items</h3>
        <table class="table-area" id="itemsTable">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Unit</th>
                    <th>Title/Text</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    function showSection(id) {
        document.getElementById('questionsSec').style.display = 'none';
        document.getElementById('videosSec').style.display = 'none';
        document.getElementById(id).style.display = 'block';
    }

    // حفظ الأسئلة
    function saveQuestion() {
        const question = {
            id: Date.now(),
            unit: document.getElementById('qUnit').value,
            text: document.getElementById('qText').value,
            options: [
                document.getElementById('optA').value,
                document.getElementById('optB').value,
                document.getElementById('optC').value,
                document.getElementById('optD').value
            ],
            type: 'question'
        };

        let db = JSON.parse(localStorage.getItem('added_questions') || '[]');
        db.push(question);
        localStorage.setItem('added_questions', JSON.stringify(db));
        alert("Question Saved to " + question.unit);
        renderTable();
    }

    // حفظ الفيديوهات
    function saveVideo() {
        const video = {
            id: Date.now(),
            unitNum: document.getElementById('vUnit').value,
            title: document.getElementById('vTitle').value,
            videoURL: document.getElementById('vUrl').value,
            type: 'video'
        };

        let db = JSON.parse(localStorage.getItem('added_lessons') || '[]');
        db.push(video);
        localStorage.setItem('added_lessons', JSON.stringify(db));
        alert("Video Lesson Added!");
        renderTable();
    }

    function renderTable() {
        const qDb = JSON.parse(localStorage.getItem('added_questions') || '[]');
        const vDb = JSON.parse(localStorage.getItem('added_lessons') || '[]');
        const body = document.getElementById('tableBody');
        body.innerHTML = '';

        vDb.forEach(v => {
            body.innerHTML += `<tr><td>Video</td><td>${v.unitNum}</td><td>${v.title}</td><td><button onclick="deleteItem(${v.id}, 'video')" class="btn-delete">Delete</button></td></tr>`;
        });
        qDb.forEach(q => {
            body.innerHTML += `<tr><td>Question</td><td>${q.unit}</td><td>${q.text.substring(0,20)}...</td><td><button onclick="deleteItem(${q.id}, 'question')" class="btn-delete">Delete</button></td></tr>`;
        });
    }

    function deleteItem(id, type) {
        let key = (type === 'video') ? 'added_lessons' : 'added_questions';
        let db = JSON.parse(localStorage.getItem(key));
        db = db.filter(item => item.id !== id);
        localStorage.setItem(key, JSON.stringify(db));
        renderTable();
    }

    window.onload = renderTable;
</script>
</body>
</html>
